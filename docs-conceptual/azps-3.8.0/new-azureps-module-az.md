---
title: Знакомство с модулем Az для Azure PowerShell
description: Знакомством с новым модулем Az для Azure PowerShell, который заменяет модуль AzureRM.
ms.date: 05/20/2020
ms.devlang: powershell
ms.topic: conceptual
ms.openlocfilehash: a50592c65c52eab005a6531572dbbfc144a0e43a
ms.sourcegitcommit: 308ebca475d1c37624d7a10a2c02047594f44cdf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/22/2020
ms.locfileid: "83778132"
---
# <a name="introducing-the-new-azure-powershell-az-module"></a><span data-ttu-id="c71b9-103">Знакомство с новым модулем Az для Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="c71b9-103">Introducing the new Azure PowerShell Az module</span></span>

<span data-ttu-id="c71b9-104">С декабря 2018 г. модуль Az для Azure PowerShell существует в общедоступной версии и теперь является модулем PowerShell, предназначенным для работы с Azure.</span><span class="sxs-lookup"><span data-stu-id="c71b9-104">Starting in December 2018, the Azure PowerShell Az module is in general release and is now the intended PowerShell module for interacting with Azure.</span></span> <span data-ttu-id="c71b9-105">Модуль Az предлагает более короткие имена команд, улучшенную стабильность, а также кроссплатформенную поддержку.</span><span class="sxs-lookup"><span data-stu-id="c71b9-105">Az offers shorter commands, improved stability, and cross-platform support.</span></span> <span data-ttu-id="c71b9-106">Кроме того, для AZ реализовано равенство функций с AzureRM, что обеспечивает простоту перехода.</span><span class="sxs-lookup"><span data-stu-id="c71b9-106">Az also has feature parity with AzureRM, giving you an easy migration path.</span></span>

> [!NOTE]
> <span data-ttu-id="c71b9-107">Для работы в Azure PowerShell на всех платформах мы рекомендуем использовать PowerShell версии 7.x и выше.</span><span class="sxs-lookup"><span data-stu-id="c71b9-107">PowerShell 7.x and later is the recommended version of PowerShell for use with Azure PowerShell on all platforms.</span></span>

<span data-ttu-id="c71b9-108">Последняя версия модуля Az позволяет работать в Azure PowerShell с помощью PowerShell, начиная с версии 6.x, на всех платформах, включая Windows, macOS и Linux.</span><span class="sxs-lookup"><span data-stu-id="c71b9-108">With the latest Az module, Azure PowerShell works with PowerShell 6.x and later on all platforms including Windows, macOS, and Linux.</span></span> <span data-ttu-id="c71b9-109">В Windows он также поддерживает работу с PowerShell 5.1.</span><span class="sxs-lookup"><span data-stu-id="c71b9-109">It is also compatible with PowerShell 5.1 on Windows.</span></span>

<span data-ttu-id="c71b9-110">Az — это новый модуль, поэтому нумерация версий начинается с 1.0.0.</span><span class="sxs-lookup"><span data-stu-id="c71b9-110">Az is a new module, so the version has been reset to 1.0.0.</span></span>

## <a name="why-a-new-module"></a><span data-ttu-id="c71b9-111">Преимущества нового модуля</span><span class="sxs-lookup"><span data-stu-id="c71b9-111">Why a new module?</span></span>

<span data-ttu-id="c71b9-112">Значительные обновления могут быть сопряжены со сложностями, поэтому важно узнать, почему было принято решение представить новый набор модулей с новыми командлетами для взаимодействия с Azure через PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c71b9-112">Major updates can be inconvenient, so it's important that we let you know why the decision was made to introduce a new set of modules, with new cmdlets, for interacting with Azure from PowerShell.</span></span>

<span data-ttu-id="c71b9-113">Самое большое и важное изменение заключается в том, что PowerShell стал кроссплатформенным продуктом с момента появления [PowerShell 6.x](/powershell/scripting/overview) на основе библиотеки .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="c71b9-113">The biggest and most important change is that PowerShell has been a cross-platform product since the introduction of [PowerShell 6.x](/powershell/scripting/overview), based on the .NET Standard library.</span></span> <span data-ttu-id="c71b9-114">Мы стремимся обеспечить поддержку Azure на всех платформах,</span><span class="sxs-lookup"><span data-stu-id="c71b9-114">We're committed to bringing Azure support to all platforms.</span></span> <span data-ttu-id="c71b9-115">поэтому нам пришлось обновить модули Azure PowerShell для возможности использования .NET Standard и их совместимости с PowerShell 6.x и последующих версий.</span><span class="sxs-lookup"><span data-stu-id="c71b9-115">This means the Azure PowerShell modules needed to be updated to use .NET Standard and be compatible with PowerShell 6.x and later.</span></span>
<span data-ttu-id="c71b9-116">Вместо того чтобы вносить в существующий модуль AzureRM сложные изменения для добавления этой поддержки, был создан модуль Az.</span><span class="sxs-lookup"><span data-stu-id="c71b9-116">Rather than taking the existing AzureRM module and introduce complex changes to add this support, the Az module was created.</span></span>

<span data-ttu-id="c71b9-117">Это решение также позволило нашим инженерам скоординировать разработку и именование командлетов и модулей.</span><span class="sxs-lookup"><span data-stu-id="c71b9-117">Creating a new module also allowed our engineers to make the design and naming of cmdlets and modules consistent.</span></span> <span data-ttu-id="c71b9-118">Все модули теперь начинаются с префикса `Az.`, а все командлеты используют форму _команда_-`Az`_существительное_.</span><span class="sxs-lookup"><span data-stu-id="c71b9-118">All modules now start with the `Az.` prefix and cmdlets all use the _Verb_-`Az`_Noun_ form.</span></span> <span data-ttu-id="c71b9-119">Ранее имена командлетов были длиннее, и в них присутствовали несоответствия.</span><span class="sxs-lookup"><span data-stu-id="c71b9-119">Previously, cmdlet names were not only longer, there were also inconsistencies in cmdlet names.</span></span>

<span data-ttu-id="c71b9-120">Количество модулей уменьшилось. Некоторые модули, предназначенные для одних и тех же служб, были объединены.</span><span class="sxs-lookup"><span data-stu-id="c71b9-120">The number of modules was also reduced: Some modules that worked with the same services have been rolled together.</span></span> <span data-ttu-id="c71b9-121">Командлеты плоскости управления и плоскости данных теперь содержатся в отдельных модулях для своих служб.</span><span class="sxs-lookup"><span data-stu-id="c71b9-121">Management plane and data plane cmdlets are now contained all within single modules for their services.</span></span> <span data-ttu-id="c71b9-122">Это упрощает задачу для тех, кто вручную управляет зависимостями и импортом.</span><span class="sxs-lookup"><span data-stu-id="c71b9-122">For those of you who manually manage dependencies and imports, this makes things much simpler.</span></span>

<span data-ttu-id="c71b9-123">Выполняя эти важные изменения, которые привели к созданию модуля Azure PowerShell, команда стремилась максимально упростить использование Azure с помощью командлетов PowerShell и добавить поддержку большего количества платформ, чем ранее.</span><span class="sxs-lookup"><span data-stu-id="c71b9-123">By making these important changes that required building a new Azure PowerShell module, the team has committed to making it easier than ever, and on more platforms than previously possible, to use Azure with PowerShell cmdlets.</span></span>

## <a name="upgrade-to-az"></a><span data-ttu-id="c71b9-124">Обновление до Az</span><span class="sxs-lookup"><span data-stu-id="c71b9-124">Upgrade to Az</span></span>

<span data-ttu-id="c71b9-125">Для поддержки новых функций Azure в PowerShell необходимо как можно скорее перейти на модуль Az.</span><span class="sxs-lookup"><span data-stu-id="c71b9-125">To keep up with the latest Azure features in PowerShell, you should migrate to the Az module as soon as possible.</span></span> <span data-ttu-id="c71b9-126">Если вы не готовы установить модуль Az в качестве замены AzureRM, вам доступны несколько способов экспериментирования с Az.</span><span class="sxs-lookup"><span data-stu-id="c71b9-126">If you're not ready to install the Az module as a replacement for AzureRM, you have a couple of options available to experiment with Az:</span></span>

- <span data-ttu-id="c71b9-127">Использование среды `PowerShell` с [Azure Cloud Shell](https://docs.microsoft.com/azure/cloud-shell/overview).</span><span class="sxs-lookup"><span data-stu-id="c71b9-127">Use a `PowerShell` environment with [Azure Cloud Shell](https://docs.microsoft.com/azure/cloud-shell/overview).</span></span> <span data-ttu-id="c71b9-128">Azure Cloud Shell — это браузерная среда оболочки, которая поставляется с пакетом установки модуля Az и поддерживает псевдонимы совместимости `Enable-AzureRM`.</span><span class="sxs-lookup"><span data-stu-id="c71b9-128">Azure Cloud Shell is a browser-based shell environment that comes with the Az module installed and `Enable-AzureRM` compatibility aliases enabled.</span></span>
- <span data-ttu-id="c71b9-129">Не удаляйте установленный модуль AzureRM с PowerShell 5.1 для Windows и установите модуль Az для PowerShell 6.x или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="c71b9-129">Keep the AzureRM module installed with PowerShell 5.1 for Windows, but install the Az module for PowerShell 6.x or later.</span></span> <span data-ttu-id="c71b9-130">PowerShell 5.1 для Windows и PowerShell 6.x и последующих версий используют разные коллекции модулей.</span><span class="sxs-lookup"><span data-stu-id="c71b9-130">PowerShell 5.1 for Windows and PowerShell 6.x and later use separate collections of modules.</span></span> <span data-ttu-id="c71b9-131">Выполните инструкции по установке [последней версии PowerShell](/powershell/scripting/install/installing-powershell), а затем [установите модуль Az](install-az-ps.md) из терминала PowerShell 6.x или последующей версии.</span><span class="sxs-lookup"><span data-stu-id="c71b9-131">Follow the instructions to install the [latest version of PowerShell](/powershell/scripting/install/installing-powershell) and then [install the Az module](install-az-ps.md) from PowerShell 6.x or later.</span></span>

<span data-ttu-id="c71b9-132">Чтобы выполнить обновление из существующей установки AzureRM, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="c71b9-132">To upgrade from an existing AzureRM install:</span></span>

1. <span data-ttu-id="c71b9-133">[Удалите модуль AzureRM для Azure PowerShell](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module).</span><span class="sxs-lookup"><span data-stu-id="c71b9-133">[Uninstall the Azure PowerShell AzureRM module](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module)</span></span>
2. <span data-ttu-id="c71b9-134">[Установите модуль Az для Azure PowerShell](install-az-ps.md).</span><span class="sxs-lookup"><span data-stu-id="c71b9-134">[Install the Azure PowerShell Az module](install-az-ps.md)</span></span>
3. <span data-ttu-id="c71b9-135">__НЕОБЯЗАТЕЛЬНО__. Активируйте режим совместимости, чтобы добавить псевдонимы для командлетов AzureRM с помощью [Enable-AzureRMAlias](/powershell/module/az.accounts/enable-azurermalias), пока вы не ознакомитесь с новым набором команд.</span><span class="sxs-lookup"><span data-stu-id="c71b9-135">__OPTIONAL__: Enable compatibility mode to add aliases for AzureRM cmdlets with [Enable-AzureRMAlias](/powershell/module/az.accounts/enable-azurermalias) while you become familiar with the new command set.</span></span> <span data-ttu-id="c71b9-136">Дополнительные сведения см. в следующем разделе или в статье [Перенос Azure PowerShell с AzureRM на Az](migrate-from-azurerm-to-az.md).</span><span class="sxs-lookup"><span data-stu-id="c71b9-136">For more information, see the next section or the [Start migration from AzureRM to Az](migrate-from-azurerm-to-az.md).</span></span>

## <a name="migrate-existing-scripts-to-az"></a><span data-ttu-id="c71b9-137">Миграция существующих скриптов на Az</span><span class="sxs-lookup"><span data-stu-id="c71b9-137">Migrate existing scripts to Az</span></span>

<span data-ttu-id="c71b9-138">Новые имена командлетов выбраны таким образом, чтобы их было легко запомнить.</span><span class="sxs-lookup"><span data-stu-id="c71b9-138">The new cmdlet names have been designed to be easy to learn.</span></span> <span data-ttu-id="c71b9-139">Вместо имен командлетов `AzureRm` или `Azure` используйте `Az`.</span><span class="sxs-lookup"><span data-stu-id="c71b9-139">Instead of using `AzureRm` or `Azure` in cmdlet names, use `Az`.</span></span> <span data-ttu-id="c71b9-140">Например, вместо старой команды `New-AzureRMVm` используется `New-AzVm`.</span><span class="sxs-lookup"><span data-stu-id="c71b9-140">For example, the old command `New-AzureRMVm` has become `New-AzVm`.</span></span>
<span data-ttu-id="c71b9-141">При переносе вам нужно не просто ознакомиться с новыми именами командлетов.</span><span class="sxs-lookup"><span data-stu-id="c71b9-141">Migration is more than just becoming familiar with the new cmdlet names, though.</span></span> <span data-ttu-id="c71b9-142">Были переименованы модули, параметры и внесено много других важных изменений.</span><span class="sxs-lookup"><span data-stu-id="c71b9-142">There are renamed modules, parameters, and other important changes.</span></span>

<span data-ttu-id="c71b9-143">Чтобы упростить процесс перехода с AzureRM на Az, мы подготовили ряд справочных ресурсов:</span><span class="sxs-lookup"><span data-stu-id="c71b9-143">We have several resources to help you with the process of migration from AzureRM to Az:</span></span>

- [<span data-ttu-id="c71b9-144">Перенос Azure PowerShell с AzureRM на Az</span><span class="sxs-lookup"><span data-stu-id="c71b9-144">Get started with migration from AzureRM to Az</span></span>](migrate-from-azurerm-to-az.md)
- [<span data-ttu-id="c71b9-145">Полный список критических изменений между AzureRM и Az 1.0.0</span><span class="sxs-lookup"><span data-stu-id="c71b9-145">Full list of breaking changes from AzureRM to Az 1.0.0</span></span>](migrate-az-1.0.0.md)
- <span data-ttu-id="c71b9-146">Командлет [Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias)</span><span class="sxs-lookup"><span data-stu-id="c71b9-146">The [Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias) cmdlet</span></span>

<span data-ttu-id="c71b9-147">В модуле Az предусмотрен режим совместимости, который позволяет использовать существующие скрипты, пока вы выполняете обновление для нового синтаксиса.</span><span class="sxs-lookup"><span data-stu-id="c71b9-147">The Az module has a compatibility mode to help you use existing scripts while you update to the new syntax.</span></span> <span data-ttu-id="c71b9-148">Командлет [Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias) активирует режим совместимости через псевдонимы, чтобы можно было использовать существующие скрипты с минимальными изменениями во время подготовки к полному переходу на Az.</span><span class="sxs-lookup"><span data-stu-id="c71b9-148">The [Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias) cmdlet enables a compatibility mode through aliases, to allow you to use existing scripts with minimal modification while working towards a full migration to Az.</span></span> <span data-ttu-id="c71b9-149">По умолчанию `Enable-AzureRmAlias` включает псевдонимы совместимости только для текущего сеанса PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c71b9-149">By default, `Enable-AzureRmAlias` only enables compatibility aliases for the current PowerShell session.</span></span> <span data-ttu-id="c71b9-150">Используйте его параметр `Scope`, чтобы псевдонимы совместимости поддерживались во всех сеансах PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c71b9-150">Use its `Scope` parameter to persist compatibility aliases across PowerShell sessions.</span></span> <span data-ttu-id="c71b9-151">Дополнительные сведения см. в справочной статье о командлете [Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias).</span><span class="sxs-lookup"><span data-stu-id="c71b9-151">For more information, see [the Enable-AzureRmAlias reference documentation](/powershell/module/az.accounts/enable-azurermalias).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c71b9-152">Несмотря на то что для имен командлетов используются псевдонимы, все же могут существовать новые (или переименованные) параметры или измененные возвращаемые значения для командлетов Az.</span><span class="sxs-lookup"><span data-stu-id="c71b9-152">Even though the cmdlet names are aliased, there may still be new (or renamed) parameters or changed return values for the Az cmdlets.</span></span> <span data-ttu-id="c71b9-153">Не ожидайте, что активация псевдонимов обеспечит миграцию для вас.</span><span class="sxs-lookup"><span data-stu-id="c71b9-153">Don't expect enabling aliases to take care of the migration for you!</span></span> <span data-ttu-id="c71b9-154">Ознакомьтесь с [полным списком критических изменений](migrate-az-1.0.0.md), чтобы узнать, где в скриптах могут потребоваться обновления.</span><span class="sxs-lookup"><span data-stu-id="c71b9-154">See the [full breaking changes list](migrate-az-1.0.0.md) to find where your scripts may require updates.</span></span>

## <a name="continued-support-for-azurerm"></a><span data-ttu-id="c71b9-155">Дальнейшая поддержка AzureRM</span><span class="sxs-lookup"><span data-stu-id="c71b9-155">Continued support for AzureRM</span></span>

<span data-ttu-id="c71b9-156">В AzureRM больше не будут добавляться новые командлеты или функции.</span><span class="sxs-lookup"><span data-stu-id="c71b9-156">AzureRM will no longer receive new cmdlets or features.</span></span> <span data-ttu-id="c71b9-157">Но модуль AzureRM по-прежнему официально поддерживается. В нем будут исправляться ошибки до декабря 2020 года.</span><span class="sxs-lookup"><span data-stu-id="c71b9-157">However, the AzureRM module is still officially maintained and will get bug fixes through December 2020.</span></span>
