---
title: Перенос скриптов Azure PowerShell с AzureRM на Az
description: Сведения о действиях и инструментах для переноса скриптов с модуля AzureRM на новый модуль Az.
author: sptramer
ms.author: sttramer
manager: carmonm
ms.devlang: powershell
ms.topic: conceptual
ms.date: 11/07/2018
ms.openlocfilehash: 0c73e7ac1d47a2a97b6136fa481d0adce8de33db
ms.sourcegitcommit: 4afdba3cd7e1d348876ce59f3503fdcd258f79ab
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/15/2018
ms.locfileid: "51574419"
---
# <a name="migrate-from-azurerm-to-azure-powershell-az"></a>Миграция с AzureRM на Az для Azure PowerShell

Модуль Az имеет равенство функций с AzureRM, но использует более короткие и единообразные имена командлетов.
Скрипты, написанные для командлетов AzureRM, не смогут автоматически работать с новым модулем. Для упрощения перехода модуль Az предлагает средства, позволяющие запускать существующие скрипты, которые используют AzureRM. Миграция всегда сопряжена со сложностями, но эта статья поможет вам начать переход на новый модуль с новым набором команд.

## <a name="ensure-your-existing-scripts-work-with-the-latest-azurerm-release"></a>Убедитесь, что существующие скрипты работают с последним выпуском AzureRM

Это самый важный шаг. Запустите существующие скрипты и убедитесь, что они работают с _последним_ выпуском AzureRM (__6.12.0__). Если скрипты не работают, ознакомьтесь с [руководством по миграции AzureRM](migration-guide.6.0.0.md).

## <a name="install-the-azure-powershell-az-module"></a>Установка модуля Az для Azure PowerShell

Первый шаг — это установка модуля Az на вашей платформе. Чтобы установить Az, нужно сначала удалить AzureRM.
В последующих разделах вы узнаете, как продолжить использовать существующие скрипты и активировать режим совместимости со старыми именами командлетов.

Чтобы установить модуль Az для Azure PowerShell, выполните следующие шаги:

* [Удалите модуль AzureRM](uninstall-azurerm-ps.md). Убедитесь, что вы удалили _все_ установленные версии AzureRM, а не только самую последнюю.
* [Установите модуль Az](install-az-ps.md).

## <a name="a-namealiasesenable-azurerm-alias-mode"></a><a name="aliases"/>Активация режима псевдонимов AzureRM

После того как вы убедились, что ваши скрипты работают с последней версией AzureRM, и удалили AzureRM, можно активировать режим совместимости для модуля Az. Режим совместимости активируется следующей командой:

```powershell-interactive
Enable-AzureRmAlias -Scope CurrentUser
```

Псевдонимы позволяют использовать старые имена командлетов с установленным модулем `Az`. Эти псевдонимы записываются в профиль пользователя для выбранной области видимости. Если профиль пользователя отсутствует, он будет создан.

> [!WARNING]
>
> Можно использовать другое значение параметра `-Scope` для этой команды, но делать это не рекомендуется. Псевдонимы записываются в профиль пользователя для выбранной области видимости, поэтому используйте их для как можно более узкой области. Активация псевдонимов для всей системы может также вызвать проблемы у других пользователей, которые установили `AzureRM` в свою локальную область видимости.

После активации режима псевдонимов запустите скрипты снова, чтобы убедиться, что они по-прежнему работают правильно. 

## <a name="change-module-imports-and-cmdlet-names"></a>Изменение импорта модулей и имен командлетов

В общем случае имена модулей были изменены таким образом, чтобы заменить `AzureRM` и `Azure` на `Az`. То же относится и к командлетам.
Например, модуль `AzureRM.Compute` был переименован в `Az.Compute`. `New-AzureRmVM` теперь называется `New-AzVM`, а `Get-AzureStorageBlob` — `Get-AzStorageBlob`.

Существует несколько исключений из этой схемы именования, о которых следует знать, прежде чем менять какие-либо имена:

| Модуль AzureRM | Модуль Az |
|----------------|-----------|
| AzureRM.DataFactories | Az.DataFactory |
| AzureRM.DataFactoryV2 | Az.DataFactory |
| AzureRM.RecoveryServices.Backup | Az.RecoveryServices |
| AzureRM.RecoveryServices.SiteRecovery | Az.RecoveryServices |

## <a name="summary"></a>Сводка

Выполнив эти шаги, можно обновить все существующие скрипты для использования с новым модулем. Если у вас возникли вопросы по описанным действиям или же проблемы, которые затруднили миграцию, оставьте комментарии к этой статье, чтобы мы могли улучшить инструкции.