---
title: Знакомство с модулем Az для Azure PowerShell
description: Знакомством с новым модулем Az для Azure PowerShell, который заменяет модуль AzureRM.
ms.date: 05/20/2020
ms.devlang: powershell
ms.topic: conceptual
ms.openlocfilehash: f051930132c6e1f1979a7cde1f75fd4856f83284
ms.sourcegitcommit: 23e5b2b0751777ef0a5ca74e40c7772653e339a3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/14/2020
ms.locfileid: "86382369"
---
# <a name="introducing-the-new-azure-powershell-az-module"></a>Знакомство с новым модулем Az для Azure PowerShell

С декабря 2018 г. модуль Az для Azure PowerShell существует в общедоступной версии и теперь является модулем PowerShell, предназначенным для работы с Azure. Модуль Az предлагает более короткие имена команд, улучшенную стабильность, а также кроссплатформенную поддержку. Кроме того, для AZ реализовано равенство функций с AzureRM, что обеспечивает простоту перехода.

> [!NOTE]
> Для работы в Azure PowerShell на всех платформах мы рекомендуем использовать PowerShell версии 7.x и выше.

Последняя версия модуля Az поддерживает использование Azure PowerShell в PowerShell версии 6.2.4 и выше на всех платформах, включая Windows, macOS и Linux. В Windows он также поддерживает работу с PowerShell 5.1.

Az — это новый модуль, поэтому нумерация версий начинается с 1.0.0.

## <a name="why-a-new-module"></a>Преимущества нового модуля

Значительные обновления могут быть сопряжены со сложностями, поэтому важно узнать, почему было принято решение представить новый набор модулей с новыми командлетами для взаимодействия с Azure через PowerShell.

Самое большое и важное изменение заключается в том, что PowerShell стал кроссплатформенным продуктом с момента появления [PowerShell](/powershell/scripting/overview) на основе библиотеки .NET Standard.
Мы стремимся обеспечить поддержку Azure на всех платформах. Это означает, что модули Azure PowerShell необходимо обновить для использования .NET Standard и совместимости с PowerShell Core. Вместо того чтобы вносить в существующий модуль AzureRM сложные изменения для добавления этой поддержки, был создан модуль Az.

Это решение также позволило нашим инженерам скоординировать разработку и именование командлетов и модулей. Все модули теперь начинаются с префикса `Az.`, а все командлеты используют форму _команда_-`Az`_существительное_. Ранее имена командлетов были длиннее, и в них присутствовали несоответствия.

Количество модулей уменьшилось. Некоторые модули, предназначенные для одних и тех же служб, были объединены. Командлеты плоскости управления и плоскости данных теперь содержатся в отдельных модулях для своих служб. Это упрощает задачу для тех, кто вручную управляет зависимостями и импортом.

Выполняя эти важные изменения, которые привели к созданию модуля Azure PowerShell, команда стремилась максимально упростить использование Azure с помощью командлетов PowerShell и добавить поддержку большего количества платформ, чем ранее.

## <a name="upgrade-to-az"></a>Обновление до Az

Для поддержки новых функций Azure в PowerShell необходимо как можно скорее перейти на модуль Az. Если вы не готовы установить модуль Az в качестве замены AzureRM, вам доступны несколько способов экспериментирования с Az.

- Использование среды `PowerShell` с [Azure Cloud Shell](https://docs.microsoft.com/azure/cloud-shell/overview). Azure Cloud Shell — это браузерная среда оболочки, которая поставляется с пакетом установки модуля Az и поддерживает псевдонимы совместимости `Enable-AzureRM`.
- Не удаляйте установленный модуль AzureRM с PowerShell 5.1 для Windows. Просто установите модуль Az для PowerShell версии 6.2.4 и выше. PowerShell 5.1 для Windows и PowerShell версии 6.2.4 и выше используют разные коллекции модулей. Выполните инструкции по установке [последней версии PowerShell](/powershell/scripting/install/installing-powershell), а затем [установите модуль Az](install-az-ps.md) из терминала PowerShell версии 6.2.4 и выше.

Чтобы выполнить обновление из существующей установки AzureRM, сделайте следующее:

1. [Удалите модуль AzureRM для Azure PowerShell](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module).
2. [Установите модуль Az для Azure PowerShell](install-az-ps.md).
3. **НЕОБЯЗАТЕЛЬНО**. Активируйте режим совместимости, чтобы добавить псевдонимы для командлетов AzureRM с помощью [Enable-AzureRMAlias](/powershell/module/az.accounts/enable-azurermalias), пока вы не ознакомитесь с новым набором команд. Дополнительные сведения см. в следующем разделе или в статье [Перенос Azure PowerShell с AzureRM на Az](migrate-from-azurerm-to-az.md).

## <a name="migrate-existing-scripts-to-az"></a>Миграция существующих скриптов на Az

Новые имена командлетов выбраны таким образом, чтобы их было легко запомнить. Вместо имен командлетов `AzureRm` или `Azure` используйте `Az`. Например, вместо старой команды `New-AzureRMVm` используется `New-AzVm`.
При переносе вам нужно не просто ознакомиться с новыми именами командлетов. Были переименованы модули, параметры и внесено много других важных изменений.

Чтобы упростить процесс перехода с AzureRM на Az, мы подготовили ряд справочных ресурсов:

- [Перенос Azure PowerShell с AzureRM на Az](migrate-from-azurerm-to-az.md)
- [Полный список критических изменений между AzureRM и Az 1.0.0](migrate-az-1.0.0.md)
- Командлет [Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias)

В модуле Az предусмотрен режим совместимости, который позволяет использовать существующие скрипты, пока вы выполняете обновление для нового синтаксиса. Командлет [Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias) активирует режим совместимости через псевдонимы, чтобы можно было использовать существующие скрипты с минимальными изменениями во время подготовки к полному переходу на Az. По умолчанию `Enable-AzureRmAlias` включает псевдонимы совместимости только для текущего сеанса PowerShell. Используйте его параметр `Scope`, чтобы псевдонимы совместимости поддерживались во всех сеансах PowerShell. Дополнительные сведения см. в справочной статье о командлете [Enable-AzureRmAlias](/powershell/module/az.accounts/enable-azurermalias).

> [!IMPORTANT]
> Несмотря на то что для имен командлетов используются псевдонимы, все же могут существовать новые (или переименованные) параметры или измененные возвращаемые значения для командлетов Az. Не ожидайте, что активация псевдонимов обеспечит миграцию для вас. Ознакомьтесь с [полным списком критических изменений](migrate-az-1.0.0.md), чтобы узнать, где в скриптах могут потребоваться обновления.

## <a name="continued-support-for-azurerm"></a>Дальнейшая поддержка AzureRM

В AzureRM больше не будут добавляться новые командлеты или функции. Но модуль AzureRM по-прежнему официально поддерживается. В нем будут исправляться ошибки до декабря 2020 года.
