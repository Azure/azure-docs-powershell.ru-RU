---
external help file: Microsoft.WindowsAzure.Commands.ServiceManagement.dll-Help.xml
ms.assetid: FDA81DCB-04A4-44E5-89CD-3C36F9BB6FA9
online version: ''
schema: 2.0.0
ms.openlocfilehash: 47ae6d45fd2043d394fa7884863a3235eaa0f8d5
ms.sourcegitcommit: 56ed085a868afa8263f8eb0f755b5822f5c29532
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/18/2020
ms.locfileid: "94075792"
---
# Set-AzureVMMicrosoftAntimalwareExtension

## КРАТКИй обзор
Настраивает расширение антивредоносной программы (Майкрософт) для виртуальной машины.

## Максимальное

### EnableMicrosoftAntimalwareExtensionJsonConfigFilePath (по умолчанию)
```
Set-AzureVMMicrosoftAntimalwareExtension [-AntimalwareConfigFile] <String> [[-Version] <String>]
 [[-Monitoring] <String>] [[-StorageContext] <AzureStorageContext>] -VM <IPersistentVM>
 [-Profile <AzureSMProfile>] [-InformationAction <ActionPreference>] [-InformationVariable <String>]
 [<CommonParameters>]
```

### EnableMicrosoftAntimalwareExtensionJsonConfig
```
Set-AzureVMMicrosoftAntimalwareExtension [-AntimalwareConfiguration] <String> [[-Version] <String>]
 [[-Monitoring] <String>] [[-StorageContext] <AzureStorageContext>] -VM <IPersistentVM>
 [-Profile <AzureSMProfile>] [-InformationAction <ActionPreference>] [-InformationVariable <String>]
 [<CommonParameters>]
```

### DisableMicrosoftAntimalwareExtension
```
Set-AzureVMMicrosoftAntimalwareExtension [[-Version] <String>] [-Disable] -VM <IPersistentVM>
 [-Profile <AzureSMProfile>] [-InformationAction <ActionPreference>] [-InformationVariable <String>]
 [<CommonParameters>]
```

### UninstallMicrosoftAntimalwareExtension
```
Set-AzureVMMicrosoftAntimalwareExtension [-Uninstall] -VM <IPersistentVM> [-Profile <AzureSMProfile>]
 [-InformationAction <ActionPreference>] [-InformationVariable <String>] [<CommonParameters>]
```

### ConfigureMicrosoftAntimalwareMonitoring
```
Set-AzureVMMicrosoftAntimalwareExtension [-Monitoring] <String> [[-StorageContext] <AzureStorageContext>]
 [-NoConfig] -VM <IPersistentVM> [-Profile <AzureSMProfile>] [-InformationAction <ActionPreference>]
 [-InformationVariable <String>] [<CommonParameters>]
```

## NОПИСАНИЕ
Командлет **Set-AzureVMMicrosoftAntimalwareExtension** настраивает расширение защиты от вредоносных программ (Майкрософт) для виртуальной машины.
Вы можете включить, отключить или удалить расширение.

## ИЛЛЮСТРИРУЮТ

### Пример 1: Включение расширения с помощью файла конфигурации
```
PS C:\> Get-AzureVM -ServiceName "ContosoService03" -Name "ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -AntimalwareConfigFile 'C:\configuration\contosoVM.json' | Update-AzureVM
```

Эта команда активирует расширение Microsoft для защиты от вредоносных программ с помощью файла конфигурации.
Команда использует командлет **Get-AzureVM** для получения указанного объекта виртуальной машины и передает объект в текущий командлет с помощью оператора конвейера.

### Пример 2: Включение расширения и включение мониторинга
```
PS C:\> $StorageContext = New-AzureStorageContext -StorageAccountName "contosostoragemain" -StorageAccountKey (Get-AzureStorageKey -StorageAccountName "Contosostoragemain").PrimaryP
S C:\> Get-AzureVM -ServiceName "ContosoService03" -Name"ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -AntimalwareConfigFile 'C:\configuration\contosoVM.json" -Monitoring ON -StorageContext $StorageContext | Update-AzureVM
```

Первая команда создает объект AzureStorageContext с помощью командлета **New-AzureStorageContext** и сохраняет его в переменной $StorageContext.

### Пример 3: Включите расширение, указав объект конфигурации.
```
PS C:\> $Config_String = [IO.File]::ReadAllText('C:\configuration\contosoVM.json')
PS C:\> Get-AzureVM -ServiceName "ContosoService03" -Name "ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -AntimalwareConfiguration $Config_String | Update-AzureVM
```

Первая команда создает строковый объект, считывая конфигурацию JSON для расширения Microsoft для защиты от вредоносных программ, а затем сохраняет его в переменной $config _string.

### Пример 4: отключение расширения
```
PS C:\> Get-AzureVM -ServiceName "ContosoService03" -Name "ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -Disable | Update-AzureVM
```

Эта команда отключает расширение, не удаляя его.
Команда использует Get-AzureVM для получения указанного объекта виртуальной машины, а затем передает объект в текущий командлет.

### Пример 5: удаление расширения
```
PS C:\> Get-AzureVM -ServiceName "ContosoService03" -Name"ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -Uninstall | Update-AzureVM
```

Эта команда удаляет расширение защиты от вредоносных программ (Майкрософт) с виртуальной машины.
Команда использует Get-AzureVM для получения указанного объекта виртуальной машины, а затем передает объект в текущий командлет.

## ПАРАМЕТРЫ

### -AntimalwareConfigFile
Указывает абсолютный путь файла конфигурации защиты от вредоносных программ (Майкрософт).
Не указывайте этот параметр, если указан параметр AntimalwareConfiguration.
Файл конфигурации должен содержать по крайней мере следующее содержимое, чтобы включить расширение для защиты от вредоносных программ (Майкрософт): 

`{ "AntimalwareEnabled": true }`

```yaml
Type: String
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfigFilePath
Aliases: 

Required: True
Position: 1
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -AntimalwareConfiguration
Указывает строковый объект, который содержит конфигурацию защиты от вредоносных программ (Майкрософт).
Этот объект не должен быть $Null или пустым.
Не указывайте этот параметр, если указан параметр AntimalwareConfigFile.
Объект конфигурации должен содержать как минимум следующее содержимое, чтобы включить расширение для защиты от вредоносных программ (Майкрософт): * * * * {"AntimalwareEnabled": true}

Пример настройки параметров JSON для защиты от вредоносных программ (Майкрософт): 

{"AntimalwareEnabled": true, "RealtimeProtectionEnabled": true, "ScheduledScanSettings": {"с включенным": истина, "день": 1, "время": 120, "scanType": "Full"},

"Исключения": {"Extensions": ". EXT1;. ext2 "," paths ":" c:\excluded-Path-1; c:\excluded-Path-2 "," процессы ":" excludedproc1.exe; excludedproc2.exe "}

}

Примечания: AntimalwareEnabled является обязательным параметром.
Значения: true = Enable.
false = ошибка, так как "ложь" не является поддерживаемым значением

RealtimeProtectionEnabled: true/false. true = Enable (включить).
ложь = отключить.
Значение по умолчанию — истина

ScheduledScanSettings:  
"включено" = истина/ложь = 0-8 (0-дневная, 1-воскресенье, 2-понедельник,................) = 0-1440 (измеряется в минутах после полуночи — 60- \> 1AM, 120- \> 2AM,...)) scanType = "Quick" или "Full" (значение по умолчанию) Примечание. Если параметр включена = true, то задается следующее значение: Day = 7 (Суббота), Time = 120 (2 AM), scanType = "быстрое исключение": несколько исключений в одном и том же списке указываются с помощью разделителей в виде точки с запятой.

Если исключения не заданы, то существующие исключения, если таковые имеются, будут заменены пустыми в системе.

```yaml
Type: String
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfig
Aliases: 

Required: True
Position: 1
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Отключение
Указывает на то, что командлет отключается расширение Microsoft для защиты от вредоносных программ.
Чтобы повторно включить расширение на той же виртуальной машине, выполните Set-AzureVMMicrosoftAntimalwareExtension без параметра Disable.

```yaml
Type: SwitchParameter
Parameter Sets: DisableMicrosoftAntimalwareExtension
Aliases: 

Required: False
Position: 2
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -InformationAction
Указывает, как этот командлет отвечает на информационное событие.

Для этого параметра допустимы следующие значения:

- Продолжал
- Игнорируйте
- INQUIRE
- SilentlyContinue
- Остановить
- Рвать

```yaml
Type: ActionPreference
Parameter Sets: (All)
Aliases: infa

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -InformationVariable
Указывает переменную данных.

```yaml
Type: String
Parameter Sets: (All)
Aliases: iv

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -Мониторинг
Указывает, следует ли собирать события Microsoft для защиты от вредоносных программ.

Для этого параметра допустимы следующие значения:

- Под.
Сбор событий Microsoft для защиты от вредоносных программ в контекст хранения. 
- Выйти.
Не следует выполнять сбор событий Microsoft для защиты от вредоносных программ.

```yaml
Type: String
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfigFilePath, EnableMicrosoftAntimalwareExtensionJsonConfig
Aliases: 

Required: False
Position: 3
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

```yaml
Type: String
Parameter Sets: ConfigureMicrosoftAntimalwareMonitoring
Aliases: 

Required: True
Position: 3
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Config
Указывает на то, что этот командлет задает параметр "config".

```yaml
Type: SwitchParameter
Parameter Sets: ConfigureMicrosoftAntimalwareMonitoring
Aliases: 

Required: True
Position: 3
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Profile
Указывает профиль Azure, из которого считывается этот командлет.
Если вы не укажете профиль, этот командлет считывает данные из локального профиля по умолчанию.

```yaml
Type: AzureSMProfile
Parameter Sets: (All)
Aliases: 

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -StorageContext
Указывает контекст хранилища Azure для мониторинга защиты от вредоносных программ (Майкрософт).

```yaml
Type: AzureStorageContext
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfigFilePath, EnableMicrosoftAntimalwareExtensionJsonConfig, ConfigureMicrosoftAntimalwareMonitoring
Aliases: 

Required: False
Position: 4
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Удаление
Указывает, что этот командлет удаляет расширение защиты от вредоносных программ (Майкрософт) с виртуальной машины.
Если включено наблюдение, командлет удаляет также коллекцию событий Майкрософт для защиты от вредоносных программ.

```yaml
Type: SwitchParameter
Parameter Sets: UninstallMicrosoftAntimalwareExtension
Aliases: 

Required: True
Position: 1
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Version
Задает версию расширения в виде строки. Примечание: поддерживаемая версия — 1,5. Более старые версии не поддерживаются корпорацией Майкрософт.

```yaml
Type: String
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfigFilePath, EnableMicrosoftAntimalwareExtensionJsonConfig, DisableMicrosoftAntimalwareExtension
Aliases: 

Required: False
Position: 2
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -VM
Указывает виртуальную машину как объект IPersistentVM.

```yaml
Type: IPersistentVM
Parameter Sets: (All)
Aliases: InputObject

Required: True
Position: Named
Default value: None
Accept pipeline input: True (ByPropertyName, ByValue)
Accept wildcard characters: False
```

### CommonParameters
Этот командлет поддерживает общие параметры:-Debug,-ErrorAction,-ErrorVariable,-InformationAction,-InformationVariable,-of Variable,-out,-PipelineVariable,-Verbose, и-WarningAction. Дополнительные сведения можно найти в разделе about_CommonParameters ( https://go.microsoft.com/fwlink/?LinkID=113216) .

## ВХОДНЫЕ данные

## НАПРЯЖЕНИЕ

## Пуск

## ДОПОЛНИТЕЛЬНЫЕ ССЫЛКИ

[Get-AzureVMMicrosoftAntimalwareExtension](./Get-AzureVMMicrosoftAntimalwareExtension.md)

[Remove-AzureVMMicrosoftAntimalwareExtension](./Remove-AzureVMMicrosoftAntimalwareExtension.md)

[Get-AzureVM](./Get-AzureVM.md)


